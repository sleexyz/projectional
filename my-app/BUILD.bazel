load("//:coarse.bzl", "base_dir", "dir_overlay")

base_dir(
    name = "sources",
    path = "my-app",
    srcs = glob(
        [
            "src/**/*",
            "Cargo.lock",
            "Cargo.toml",
        ],
    ),
)

dir_overlay(
    name = "build",
    cmd = "cargo build",
    dir = ":sources",
    deps = [
        "//puddlejumper:build",
    ],
)
